{
  "task_description": "Build a mobile-friendly customer signature management system with GDPR consent collection workflow",
  "scoped_services": ["main"],
  "files_to_modify": {
    "main": [
      "src/lib/utils.ts",
      "src/app/layout.tsx",
      "src/lib/db/schema/index.ts"
    ]
  },
  "files_to_reference": [
    "src/lib/db/schema/example.ts",
    "src/components/ui/dialog.tsx",
    "src/components/Navigation.tsx",
    "src/app/layout.tsx"
  ],
  "patterns": {
    "drizzle_schema": "Schemas use pgTable with serial id, text fields, and timestamp for createdAt. Export both table and inferred types. Example in src/lib/db/schema/example.ts",
    "cn_utility": "Use cn() from @/lib/utils for className merging - already exists in project",
    "css_variables": "shadcn/ui CSS variables configured in src/style/global.css - ready to use",
    "database_client": "Database client in src/lib/db/client.ts uses Neon serverless with Drizzle HTTP adapter",
    "shadcn_components": "Only dialog.tsx exists - need to add remaining shadcn components via CLI",
    "result_pattern": "Project uses neverthrow for Result types - services should return Result<T, E>"
  },
  "existing_implementations": {
    "description": "Found existing patterns and configurations that should be followed",
    "relevant_files": [
      {
        "path": "src/lib/db/schema/example.ts",
        "purpose": "Template for Drizzle schema definitions - use this pattern for new tables"
      },
      {
        "path": "src/lib/utils.ts",
        "purpose": "Contains cn() utility - add formatDate() function here"
      },
      {
        "path": "src/style/global.css",
        "purpose": "CSS variables for shadcn/ui theming already configured"
      },
      {
        "path": "tailwind.config.js",
        "purpose": "Tailwind config with shadcn/ui setup - no changes needed"
      },
      {
        "path": "components.json",
        "purpose": "shadcn/ui configuration pointing to correct paths"
      },
      {
        "path": "src/components/ui/dialog.tsx",
        "purpose": "Example shadcn component - follow this import pattern"
      }
    ]
  },
  "tech_stack": {
    "framework": "Next.js 15 with App Router",
    "language": "TypeScript",
    "styling": "Tailwind CSS",
    "orm": "Drizzle with Neon serverless",
    "ui_components": "shadcn/ui",
    "forms": "React Hook Form + Zod (already installed)",
    "error_handling": "neverthrow (already installed)"
  },
  "critical_constraints": [
    "Mobile-first design - all components must work on touch devices",
    "Signature canvas must set backgroundColor='white'",
    "Use sonner for toasts (replacing react-toastify for shadcn compatibility)",
    "All forms must use Zod validation with zodResolver",
    "Use German labels for all UI text (Kunden, Datenschutz, Speichern, etc.)",
    "Signature flow must be fullscreen (no TopNav)"
  ],
  "created_at": "2025-12-26T00:16:04.849723",
  "updated_at": "2025-12-26T00:30:00.000000"
}
